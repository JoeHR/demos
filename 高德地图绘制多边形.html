<!--
 * @Author: rh
 * @Date: 2020-08-06 20:32:24
 * @LastEditTime: 2020-08-08 10:09:25
 * @LastEditors: rh
 * @Description: 命名规范
 * @变量: - 小驼峰式命名法（前缀应当是名词）
 * @常量: - 全大写（使用大写字母和下划线来组合命名，下划线用以分割单词）
 * @函数:  - 小驼峰式命名法（前缀应当为动词）
 * @这不是一个 bug，这只是一个未列出来的特性
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://webapi.amap.com/maps?v=1.4.15&key=0242049babcd80ab16388aff150f46b1&plugin=AMap.PolyEditor,AMap.Geolocation,AMap.PlaceSearch,AMap.Geocoder,AMap.Riding"></script>
</head>
<style>
  *{
    margin:0;
    padding:0;
  }
  #gmap{
    width:100vw;
    height:100vh;
  }
  .input-card{
    position: absolute;
    right: 20px;
    bottom: 20px;
    z-index: 10;
    background: #fff;
  }
</style>
<body>
  <div class="" id="gmap"></div>
  <div class="input-card" style="width: 120px">
    <button class="btn" onclick="polyEditor.open()" style="margin-bottom: 5px">开始编辑</button> 
    <button class="btn" onclick="polyEditor.close()">结束编辑</button> 
  </div>
</body>

<script type="text/javascript">
  // 创建地图
  const map = new AMap.Map('gmap');

//   var path = [
// [120.157273,30.272816],
// [120.158432,30.272946],
// [120.159336,30.273025],
// [120.16105,30.273208],
// [120.160862,30.273981],
// [120.161828,30.274718],
// [120.16289,30.274811],
// [120.164537,30.27476],
// [120.165717,30.27494],
// [120.16657,30.275],
// [120.167734,30.274996],
// [120.169799,30.274824],
// [120.1707,30.274732],
// [120.170716,30.274574],
// [120.170754,30.273787],
// [120.170872,30.272721],
// [120.171044,30.269844],
// [120.171217,30.265366],
// [120.171324,30.264578],
// [120.170101,30.264634],
// [120.168873,30.264569],
// [120.168025,30.264467],
// [120.166003,30.264189],
// [120.164957,30.264092],
// [120.163632,30.26386],
// [120.162409,30.263693],
// [120.161014,30.263499],
// [120.160773,30.264379],
// [120.160644,30.26476],
// [120.160322,30.265696],
// [120.159904,30.267271],
// [120.159678,30.267901],
// [120.159378,30.269004],
// [120.158509,30.270551],
// [120.158015,30.271181],
// [120.157694,30.271654],
// [120.157318,30.272738],
// [120.157273,30.272816]

// ]

//   var path = [
//   [120.157273,30.272816],
//   [120.158432,30.272946],
//   [120.159336,30.273025],
//   [120.159623,30.2731],
//   [120.159489,30.274077],
//   [120.159436,30.274503],
//   [120.159468,30.275083],
//   [120.159953,30.275231],
//   [120.160935,30.275319],
//   [120.161718,30.275356],
//   [120.162163,30.275143],
//   [120.16289,30.274811],
//   [120.164537,30.27476],
//   [120.165717,30.27494],
//   [120.16657,30.275],
//   [120.167734,30.274996],
//   [120.169799,30.274824],
//   [120.1707,30.274732],
//   [120.170716,30.274574],
//   [120.170754,30.273787],
//   [120.170872,30.272721],
//   [120.171044,30.269844],
//   [120.171217,30.265366],
//   [120.171324,30.264578],
//   [120.170101,30.264634],
//   [120.168873,30.264569],
//   [120.168025,30.264467],
//   [120.166003,30.264189],
//   [120.164957,30.264092],
//   [120.163632,30.26386],
//   [120.162409,30.263693],
//   [120.161014,30.263499],
//   [120.160773,30.264379],
//   [120.160644,30.26476],
//   [120.160322,30.265696],
//   [120.159904,30.267271],
//   [120.159678,30.267901],
//   [120.159378,30.269004],
//   [120.158509,30.270551],
//   [120.158015,30.271181],
//   [120.157694,30.271654],
//   [120.157318,30.272738],
//   [120.157273,30.272816]
// ]

var path = [
  [120.157273,30.272816],
  [120.158432,30.272946],
  [120.159336,30.273025],
  [120.159623,30.2731],
  [120.16057,30.273148],
  [120.160612,30.273912],
  [120.160355,30.274436],
  [120.160312,30.274816],
  [120.160741,30.274899],
  [120.161213,30.27502],
  [120.161718,30.275356],
  [120.162163,30.275143],
  [120.16289,30.274811],
  [120.164537,30.27476],
  [120.165717,30.27494],
  [120.16657,30.275],
  [120.167734,30.274996],
  [120.169799,30.274824],
  [120.1707,30.274732],
  [120.170716,30.274574],
  [120.170754,30.273787],
  [120.170872,30.272721],
  [120.171044,30.269844],
  [120.171217,30.265366],
  [120.171324,30.264578],
  [120.170101,30.264634],
  [120.168873,30.264569],
  [120.168025,30.264467],
  [120.166003,30.264189],
  [120.164957,30.264092],
  [120.163632,30.26386],
  [120.162409,30.263693],
  [120.161014,30.263499],
  [120.160773,30.264379],
  [120.160644,30.26476],
  [120.160322,30.265696],
  [120.159904,30.267271],
  [120.159678,30.267901],
  [120.159378,30.269004],
  [120.158509,30.270551],
  [120.158015,30.271181],
  [120.157694,30.271654],
  [120.157318,30.272738],
  [120.157273,30.272816]
]

    var markers = path.map(v=>{
      const marker = new AMap.Marker({
        position:v,
        extData:v,
        title: v
      })
      marker.on('click',(e)=>{
        console.log(marker.getExtData())
      })
      return marker
    })
    map.add(markers)

    // var polygon = new AMap.Polygon({
    //     path: path,
    //     strokeColor: "#FF33FF", 
    //     strokeWeight: 6,
    //     strokeOpacity: 0.2,
    //     fillOpacity: 0.4,
    //     fillColor: '#1791fc',
    //     zIndex: 50,
    // })




    // map.add(polygon)
    // // 缩放地图到合适的视野级别
    // map.setFitView([ polygon ])

    // var polyEditor = new AMap.PolyEditor(map, polygon)

    // polyEditor.on('addnode', function(event) {
    //     log.info('触发事件：addnode')
    // })

    // polyEditor.on('adjust', function(event) {
    //     log.info('触发事件：adjust')
    // })

    // polyEditor.on('removenode', function(event) {
    //     log.info('触发事件：removenode')
    // })

    // polyEditor.on('end', function(event) {
    //     log.info('触发事件： end')
    //     // event.target 即为编辑后的多边形对象
    // })
    
</script>
</html>